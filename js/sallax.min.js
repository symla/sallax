var s_profiles=[],s_elements=null,s_default_speed=0,s_default_v_center=.5,s_default_e_center=.5,s_default_axis="y",s_default_factor_x=1,s_default_factor_y=1,s_default_rel_element="!self!",s_default_alpha=!1,s_default_alpha_mode="actual",s_viewport_height=0,s_viewport_width=0;function sallax_register_profile(e,t){void 0==s_profiles[e]?(s_profiles[e]={},void 0!=t.speed?s_profiles[e].speed=t.speed:s_profiles[e].speed=s_default_speed,void 0!=t.vcenter?s_profiles[e].vcenter=t.vcenter:s_profiles[e].vcenter=s_default_v_center,void 0!=t.ecenter?s_profiles[e].ecenter=t.ecenter:s_profiles[e].ecenter=s_default_e_center,void 0!=t.axis?s_profiles[e].axis=t.axis:s_profiles[e].axis=s_default_axis,void 0!=t.factorx?s_profiles[e].factorx=t.factorx:s_profiles[e].factorx=s_default_factor_x,void 0!=t.factory?s_profiles[e].factory=t.factory:s_profiles[e].factory=s_default_factor_y,void 0!=t.relelement?s_profiles[e].relelement=t.relelement:s_profiles[e].relelement=s_default_rel_element,void 0!=t.alpha?s_profiles[e].alpha=t.alpha:s_profiles[e].alpha=s_default_alpha,void 0!=t.alphamode?s_profiles[e].alphamode=t.alphamode:s_profiles[e].alphamode=s_default_alpha_mode):sallax_error("Can not register new profile '"+e+"' because it is also present.")}function sallax_log(e){console.log("SALLAX: "+e)}function sallax_error(e){console.error("SALLAX: "+e)}function sallax_setup(){window.addEventListener("scroll",sallax_update_scene,!1),window.addEventListener("resize",sallax_refresh,!1),s_viewport_height=window.innerHeight,s_viewport_width=window.innerWidth;var e=document.getElementsByClassName("sallax");s_elements=[];for(var t=0;t<e.length;t++)s_elements.push(sallax_create_element_wrapper(e[t]));sallax_update_scene()}function sallax_destroy(){window.removeEventListener("scroll",sallax_update_scene,!1),window.removeEventListener("resize",sallax_refresh,!1);for(var e=0;e<s_elements.length;e++){var t=s_elements[e];t.element.style.opacity="",set_translyte_y(t,0),set_translyte_x(t,0)}s_elements=null}function sallax_refresh(){sallax_destroy(),sallax_setup()}function sallax_apply_profile(e,t){if(null==s_profiles[t]||void 0==s_profiles[t])sallax_error("Can not apply profile '"+t+"' because it does not exist. Fallback: Applying default profile."),sallax_apply_profile(e,"default");else{var a=s_profiles[t];e.speed=a.speed,e.vcenter=a.vcenter,e.ecenter=a.ecenter,e.axis_x=a.axis.indexOf("x")>=0,e.axis_y=a.axis.indexOf("y")>=0,e.factor_x=a.factorx,e.factor_y=a.factory,e.relative_element=find_relative_element(e.element,a.relelement),null==e.relative_element&&(e.relative_element=e.element),e.alpha=a.alpha,e.alpha_actual="corrected"!=a.alphamode.toLowerCase()}}function sallax_create_element_wrapper(e){var t=new Object;return t.element=e,e.hasAttribute("data-profile")?sallax_apply_profile(t,e.dataset.profile):sallax_apply_profile(t,"default"),e.hasAttribute("data-speed")&&(t.speed=e.dataset.speed),e.hasAttribute("data-v-center")&&(t.vcenter=e.dataset.vCenter),e.hasAttribute("data-e-center")&&(t.ecenter=e.dataset.eCenter),e.hasAttribute("data-axis")&&(t.axis_x=e.dataset.axis.indexOf("x")>=0,t.axis_y=e.dataset.axis.indexOf("y")>=0),e.hasAttribute("data-factor-x")&&(t.factor_x=e.dataset.factorX),e.hasAttribute("data-factor-y")&&(t.factor_y=e.dataset.factorY),e.hasAttribute("data-rel-element")&&(t.relative_element=find_relative_element(e,e.dataset.relElement),null==t.relative_element&&(t.relative_element=e)),e.hasAttribute("data-alpha")&&(t.alpha=e.dataset.alpha),e.hasAttribute("data-alpha-mode")&&(t.alpha_actual="corrected"!=e.dataset.alphaMode.toLowerCase()),t.t_x=0,t.t_y=0,t}function find_relative_element(e,t){var a=e.parentNode;return"!self!"==t.toLowerCase()?e:"!container!"==t.toLowerCase()?null==a||void 0==a?(sallax_error("Selector '!container!' failed because element has no container. Fallback: root itself is relative element."),null):a:"html"==a.tagName.toLowerCase()?(sallax_error("Reached tag html. Found no relative element by selector '"+t+"'. Fallback: root itself is relative element."),null):0==t.indexOf(".")?a.classList.contains(t.substring(1))?a:find_relative_element(a,t):0==t.indexOf("#")?a.id==t.substring(1)?a:find_relative_element(a,t):0==t.indexOf("!")?a.tagName.toLowerCase()==t.substring(1).toLowerCase()?a:find_relative_element(a,t):(sallax_error("Selector '"+t+"' is invalid. Fallback: root itself is relative element."),e)}function sallax_update_scene(){for(var e=0;e<s_elements.length;e++)sallax_update_element(s_elements[e])}function sallax_update_element(e){var t=e.relative_element.getBoundingClientRect(),a=t.top+t.height*e.ecenter,l=a-e.t_y,s=s_viewport_height*e.vcenter,r=(s-l)/s_viewport_height;if(e.alpha){var _;if(e.alpha_actual){var n=(s-a)/s_viewport_height;_=1-Math.abs(n)}else _=1-Math.abs(r);e.element.style.opacity=_}if(0!=e.speed){if(e.axis_y&&0!=e.factor_y)set_translyte_y(e,-1*r*s_viewport_height*.1*e.speed*e.factor_y);if(e.axis_x&&0!=e.factor_x)set_translyte_x(e,-1*r*s_viewport_width*.1*e.speed*e.factor_x)}}function set_translyte_y(e,t){e.t_y=t,set_transform(e.element,"translate("+e.t_x+"px, "+e.t_y+"px)")}function set_translyte_x(e,t){e.t_x=t,set_transform(e.element,"translate("+e.t_x+"px, "+e.t_y+"px)")}function set_transform(e,t){e.style.webkitTransform=t,e.style.MozTransform=t,e.style.msTransform=t,e.style.OTransform=t,e.style.transform=t}sallax_register_profile("default",{});
